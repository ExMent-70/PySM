{
  "description": "Сегментирует (выделяет) объекты на изображениях по текстовому описанию (промпту), используя связку моделей GroundingDINO и SAM2.",
  "category": "Маски и Фон",
  "author": "Андрей Пугачев | t.me/pugachev_fotodeti03",
  "version": "1.0.0",
  "command_line_args_meta": {
    "sam2_inputs": {
      "type": "dir_path",
      "description": "Путь к исходным изображениям или папкам для обработки.",
      "required": true,
      "default": "D:/WORK_PYTHON2025/_INPUT"
    },
    "sam2_output": {
      "type": "dir_path",
      "description": "Путь к папке для сохранения результатов (масок и изображений).",
      "required": true,
      "default": "D:/WORK_PYTHON2025/_OUTPUT"
    },
    "sam2_prompt": {
      "type": "string",
      "description": "Текстовое описание объекта, который нужно выделить (на английском языке).",
      "required": true,
      "default": "face"
    },
    "sam2_config": {
      "type": "file_path",
      "description": "Путь к файлу конфигурации `config.toml`. Если не указан, используется файл из папки скрипта.",
      "required": false,
      "default": "config.toml"
    },
    "sam2_sam_model": {
      "type": "choice",
      "description": "Модель Segment Anything Model 2 для построения точной маски.",
      "required": false,
      "default": "SAM2-Hiera-L",
      "choices": [
        "SAM2-Hiera-T",
        "SAM2-Hiera-S",
        "SAM2-Hiera-B+",
        "SAM2-Hiera-L"
      ]
    },
    "sam2_dino_model": {
      "type": "choice",
      "description": "Модель GroundingDINO для поиска объекта по тексту.",
      "required": false,
      "default": "GroundingDINO-B",
      "choices": [
        "GroundingDINO-T",
        "GroundingDINO-B"
      ]
    },
    "sam2_threshold": {
      "type": "float",
      "description": "Порог уверенности для детекции объекта (от 0.0 до 1.0).",
      "required": false,
      "min_val": 0.0,
      "max_val": 1.0
    },
    "sam2_threads": {
      "type": "int",
      "description": "Количество потоков для параллельной обработки.",
      "required": false,
      "min_val": 1
    },
    "sam2_device": {
      "type": "choice",
      "description": "Устройство для обработки (auto - автоматически).",
      "required": false,
      "choices": [
        "auto",
        "cpu",
        "cuda"
      ]
    },
    "sam2_background": {
      "type": "choice",
      "description": "Тип фона для итогового изображения.",
      "required": false,
      "choices": [
        "Alpha",
        "Color"
      ]
    },
    "sam2_bg_color": {
      "type": "string",
      "description": "Цвет фона в формате HEX (например, '#FFFFFF').",
      "required": false
    },
    "sam2_blur": {
      "type": "int",
      "description": "Радиус размытия краев маски.",
      "required": false
    },
    "sam2_offset": {
      "type": "int",
      "description": "Смещение краев маски (положительное - расширение, отрицательное - сужение).",
      "required": false
    },
    "sam2_smooth": {
      "type": "float",
      "description": "Сила сглаживания 'ступенчатых' краев маски.",
      "required": false
    },
    "sam2_fill_holes": {
      "type": "bool",
      "description": "Включить заполнение 'дыр' внутри объекта на маске.",
      "required": false,
      "default": true
    },
    "sam2_invert": {
      "type": "bool",
      "description": "Инвертировать финальную маску (вырезать фон, а не объект).",
      "required": false
    },
    "sam2_verbose": {
      "type": "bool",
      "description": "Включить детальное логирование для отладки.",
      "required": false
    }
  }
}