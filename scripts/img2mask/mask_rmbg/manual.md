# Руководство по скрипту "Удаление фона (RMBG)"

## 1. Назначение

Этот скрипт предназначен для высококачественного удаления фона с изображений с использованием предобученных нейросетевых моделей, таких как **RMBG-2.0** и **BiRefNet**. Он позволяет как полностью вырезать объект на прозрачный фон, так и заменять фон сплошным цветом.

## 2. Логика работы

1.  **Загрузка конфигурации:** Скрипт сначала загружает базовые настройки из файла `config.toml`, который находится в той же папке.
2.  **Получение параметров:** Затем он считывает параметры, указанные в интерфейсе PySM. **Параметры из PySM имеют приоритет** и переопределяют значения из `config.toml`.
3.  **Поиск изображений:** Скрипт сканирует папки из `rmbg_inputs` и находит все поддерживаемые изображения.
4.  **Обработка:** Изображения обрабатываются в несколько потоков. Для каждого создается маска, которая затем улучшается на основе заданных параметров (сглаживание, заполнение дыр и т.д.).
5.  **Сохранение:** В папке `rmbg_output` создается два файла: изображение с удаленным фоном (`*_removed.png`) и его маска (`*_mask.png`).

## 3. Ключевые параметры

*   `rmbg_inputs`: Список путей к исходным файлам или папкам.
*   `rmbg_output`: Папка для сохранения результатов.
*   `rmbg_model`: Выбор основной модели. `RMBG-2.0` - универсальная, `BiRefNet-portrait` - для портретов.
*   `rmbg_fill_holes`: Очень полезная опция, которая заполняет случайные "дыры" в объекте.
*   `rmbg_smooth`: Сглаживает края маски, убирая "ступенчатость".