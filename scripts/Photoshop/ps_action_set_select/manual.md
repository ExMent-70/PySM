# Руководство: Выбор и запуск экшена (v1.3)

## 1. Назначение
Этот скрипт является гибким инструментом для работы с экшенами Photoshop, поддерживающим автоматический и интерактивный режимы, поведение которых управляется через набор параметров.

## 2. Основные параметры
- **Имя набора экшенов** (`ps_action_set`): Имя набора (папки).
- **Имя экшена** (`ps_action_name`): Имя конкретного экшена.

## 3. Служебные параметры
- **Всегда показывать диалог** (`__show_dialog_always`): Принудительно включает интерактивный режим.
- **Сохранить набор в контекст** (`__save_set_to_context`): Сохраняет имя выбранного в диалоге набора в контекст как `ps_action_set`.
- **Сохранить экшен в контекст** (`__save_action_to_context`): Сохраняет имя выбранного в диалоге экшена в контекст как `ps_action_name`.
- **Выполнить экшен** (`__execute_action`): Управляет запуском экшена в обоих режимах.

## 4. Логика работы

### Сценарий 1: Автоматический режим
- **Условие:** Флаг `__show_dialog_always` **выключен** (по умолчанию) И `ps_action_set` задан И `ps_action_name` задан.
- **Действия:**
    1.  **Проверка существования:** Скрипт сначала проверяет, действительно ли существуют указанные набор и экшен в Photoshop. Если нет — завершается с ошибкой.
    2.  **Проверка флага выполнения:** Если экшен найден, скрипт проверяет флаг `__execute_action`.
        -   Если он **включен**, экшен немедленно выполняется.
        -   Если он **выключен**, экшен не выполняется, и скрипт успешно завершается (полезно для "тихой" проверки существования).
    3.  Флаги `__save..._to_context` в этом режиме игнорируются.

### Сценарий 2: Интерактивный режим
- **Условие:** Флаг `__show_dialog_always` **включен** ИЛИ `ps_action_set` / `ps_action_name` не заданы.
- **Действия:**
    1.  **Показ диалога:** На экране появляется диалог для выбора.
    2.  **Предвыбор:** Если `ps_action_set` и `ps_action_name` были переданы, они будут автоматически выбраны в списках при открытии.
    3.  **Обработка выбора:** После нажатия "ОК", скрипт анализирует флаги:
        - `__save_set_to_context`: Сохраняет имя набора в контекст.
        - `__save_action_to_context`: Сохраняет имя экшена в контекст.
        - `__execute_action`: Выполняет выбранный экшен.