# Руководство по "Редактору кластеров" (v1.1.0)

## 1. Назначение

**"Редактор кластеров"** — это интерактивный инструмент с графическим интерфейсом, предназначенный для визуальной проверки и ручной корректировки результатов автоматической кластеризации лиц. Он позволяет легко исправлять ошибки, допущенные алгоритмом, перед финальными этапами обработки, такими как экспорт или сортировка файлов.

## 2. Логика работы

1.  **Автоматическая загрузка:** При запуске скрипт автоматически находит все необходимые данные (JSON-файлы с информацией о лицах, папки с изображениями) на основе контекста текущего рабочего процесса. Никакой ручной настройки не требуется.

2.  **Интерфейс:** Окно разделено на две основные части:
    *   **Левая панель:** Отображает список всех найденных кластеров (включая "шум" и групповые фото). Для каждого кластера показана миниатюра первого фото, имя и количество изображений.
    *   **Правая панель:** При выборе кластера слева, здесь отображается галерея всех фотографий, входящих в него.

3.  **Основные действия:**
    *   **Перемещение (Drag & Drop):** Вы можете выделить одно или несколько изображений в правой панели и перетащить их на любой другой кластер в левой панели. Это мгновенно обновит состав кластеров.
    *   **Переименование:** Двойной клик по кластеру в левой панели (или через контекстное меню) позволяет изменить его имя. Префикс с номером кластера (`01-`) останется неизменным.
    *   **Просмотр:** Двойной клик по изображению в правой панели открывает его в полноэкранном режиме с возможностью пролистывать все фото текущего кластера.

4.  **Сохранение изменений:**
    *   Все изменения (перемещения, переименования) накапливаются, но **не применяются автоматически**.
    *   Для фиксации результатов необходимо нажать кнопку **"Сохранить изменения"**.
    *   При сохранении скрипт обновляет JSON-файлы (`info_portrait_faces.json` и `info_group_faces.json`).
    *   Если скрипт работает в режиме с отсортированными папками, он также **физически переместит** соответствующие файлы изображений на диске в папки новых кластеров.

## 3. Параметры

У данного скрипта **нет настраиваемых параметров**. Он полностью автоматизирован и получает всю необходимую информацию из контекста рабочего процесса PySM.