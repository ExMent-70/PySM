# Руководство по скрипту "Генератор HTML-отчета" (v2.3.0)

## 1. Назначение

Скрипт **"Генератор HTML-отчета"** предназначен для создания наглядного и интерактивного отчета в формате HTML. Этот отчет позволяет визуально оценить качество работы предыдущих этапов — анализа и кластеризации. Он является ключевым инструментом для ручной проверки и анализа результатов перед финальными шагами.

## 2. Логика работы

1.  **Автоматическое определение путей:** Скрипт получает всю необходимую информацию о путях к папке с результатами анализа и исходным изображениям напрямую из Контекста Коллекции PySM. Ручной ввод путей не требуется.

2.  **Загрузка данных:** Скрипт загружает все необходимые JSON-файлы из автоматически определенной папки (`info_portrait_faces.json`, `info_group_faces.json`, `matches_portrait_to_group.json`).

3.  **Подготовка контекста:** Все загруженные данные агрегируются и преобразуются в структуру, удобную для отображения в HTML-шаблоне.

4.  **Рендеринг HTML:** С помощью шаблонизатора Jinja2 скрипт создает финальный файл `face_clustering_report.html`.

5.  **Копирование ассетов:** Скрипт копирует вспомогательные файлы (`.css`, `.js`) в ту же папку, где был создан HTML-отчет, для обеспечения его интерактивности и корректного отображения.

## 3. Интерактивные возможности отчета

*   **Сводрачиваемые секции:** Все основные блоки отчета (кластеры, шум, совпадения) можно сворачивать и разворачивать.
*   **Ленивая загрузка (Lazy Loading):** Миниатюры изображений подгружаются только по мере прокрутки страницы, что обеспечивает мгновенное открытие даже очень больших отчетов.
*   **Просмотр в полный размер:** Клик по любой миниатюре открывает модальное окно с увеличенным изображением и подробной информацией о нем.