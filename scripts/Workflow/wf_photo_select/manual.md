# Руководство по "Выборке файлов по номерам" (v1.1)

## 1. Назначение

Этот скрипт является мощным инструментом для автоматизации отбора фотографий. Он решает частую задачу, когда клиент присылает список номеров желаемых фотографий в виде простого текста (например, в мессенджере). Скрипт автоматически находит все нужные файлы и собирает их в одном месте.

## 2. Логика работы

1.  **Запуск:** При запуске открывается окно с двумя основными панелями. Скрипт получает из настроек путь к папке с файлами (`__fs_source_dir`) и режим работы (`__fs_mode`: `copy` или `move`).

2.  **Ввод текста:** Пользователь вставляет в левую панель любой текст, содержащий 4-значные номера фотографий.

3.  **Поиск файлов:** После нажатия кнопки "Найти файлы":
    -   Скрипт извлекает из текста все уникальные 4-значные числа.
    -   Он рекурсивно сканирует всю указанную исходную папку, включая все вложенные папки (`CaptureOne` и т.д.).
    -   Для каждого найденного номера он ищет **все файлы**, у которых базовое имя (имя без расширения) содержит этот номер. Например, для номера `1234` будут найдены `IMG_1234.CR2`, `IMG_1234.xmp`, `IMG_1234.cos` и т.д.
    -   Результаты поиска отображаются в таблице справа: найденные номера подсвечиваются зеленым, ненайденные — красным.

4.  **Выполнение операции:**
    -   Режим (`Копировать` или `Переместить`) определяется параметром `__fs_mode`.
    -   После нажатия кнопки "Выполнить" скрипт берет все найденные на предыдущем шаге файлы.
    -   Внутри исходной папки создается подпапка `Select`.
    -   Скрипт копирует или перемещает каждый найденный файл в папку `Select`, **полностью сохраняя исходную структуру подпапок**. Например, файл из `.../исходная_папка/CaptureOne/Settings131/` будет скопирован в `.../исходная_папка/Select/CaptureOne/Settings131/`.
    -   Прогресс операции отображается в виде прогресс-бара.

## 3. Параметры

-   **`__fs_source_dir`** (служебный):
    -   **Назначение:** Путь к папке, в которой будет производиться поиск файлов.
    -   **Источник:** Обычно автоматически заполняется из переменной контекста `session_path` или `capture_path`.

-   **`__fs_mode`** (служебный):
    -   **Назначение:** Определяет, будет ли скрипт копировать (`copy`) или перемещать (`move`) файлы.
    -   **Источник:** Устанавливается в настройках скрипта в PySM.