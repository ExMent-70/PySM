# Руководство по "Выборке файлов по номерам" (v1.2)

## 1. Назначение

Этот скрипт является мощным инструментом для автоматизации отбора фотографий. Он решает частую задачу, когда клиент присылает список номеров желаемых фотографий в виде простого текста (например, в мессенджере). Скрипт автоматически находит все нужные файлы и собирает их в одном месте.

## 2. Логика работы

1.  **Запуск и определение путей:** При запуске скрипт автоматически определяет рабочие папки на основе информации о текущем рабочем процессе (workflow) из PySM.
    *   **Исходная папка:** `{папка_сессии}/{имя_сессии}/Capture/{папка_фото_с_камеры}`
    *   **Целевая папка:** `{папка_сессии}/{имя_сессии}/Selects/{папка_фото_с_камеры}`
    Вам больше не нужно указывать путь вручную.

2.  **Ввод текста:** Пользователь вставляет в левую панель любой текст, содержащий 4-значные номера фотографий.

3.  **Поиск файлов:** После нажатия кнопки "Найти файлы":
    -   Скрипт извлекает из текста все уникальные 4-значные числа.
    -   Он рекурсивно сканирует всю исходную папку, включая любые вложенные папки.
    -   Для каждого найденного номера он ищет **все файлы**, у которых базовое имя (имя без расширения) содержит этот номер. Например, для номера `1234` будут найдены `IMG_1234.CR2`, `IMG_1234.xmp`, `IMG_1234.cos` и т.д.
    -   Результаты поиска отображаются в таблице справа: найденные номера подсвечиваются зеленым, ненайденные — красным.

4.  **Выполнение операции:**
    -   Режим (`Копировать` или `Переместить`) определяется параметром `__fs_mode`.
    -   После нажатия кнопки "Выполнить" скрипт берет все найденные на предыдущем шаге файлы.
    -   Он копирует или перемещает каждый найденный файл в целевую папку, **полностью сохраняя исходную структуру подпапок**. Например, файл из `.../исходная_папка/CaptureOne/Settings131/` будет скопирован в `.../целевая_папку/CaptureOne/Settings131/`.
    -   Прогресс операции отображается в виде прогресс-бара.

## 3. Параметры

-   **`__fs_mode`** (служебный):
    -   **Назначение:** Определяет, будет ли скрипт копировать (`copy`) или перемещать (`move`) файлы.
    -   **Источник:** Устанавливается в настройках скрипта в PySM. По умолчанию используется `copy`.