# Руководство по скрипту "Условный переход"

## 1. Назначение

Скрипт **"Условный переход"** — это мощный инструмент для создания нелинейных рабочих процессов. Он позволяет прервать стандартную последовательность выполнения скриптов и "перепрыгнуть" к любому другому скрипту в рамках текущего набора.

Это дает возможность реализовывать сложную логику, такую как:
-   **Циклы:** вернуться к предыдущему скрипту для повторной обработки.
-   **Ветвление:** в зависимости от какого-либо условия (проверенного предыдущим скриптом), перейти к разным веткам обработки.

**Внимание:** Этот скрипт предназначен для продвинутых пользователей и может работать только в среде PySM.

## 2. Параметры

-   **Заголовок окна** (`dlg_goto_title`):
    -   Текст в заголовке диалогового окна.

-   **Текст сообщения** (`dlg_goto_message`):
    -   Текст-приглашение, который отображается над выпадающим списком скриптов.

## 3. Логика работы

1.  При запуске скрипт получает от PySM список всех экземпляров скриптов, которые находятся в том же наборе, что и он сам.
2.  Этот список отображается пользователю в виде диалогового окна с выпадающим списком.
3.  Далее возможны два исхода:
    -   **Пользователь выбирает скрипт и нажимает "OK"**:
        -   Скрипт сообщает PySM, что следующим должен быть выполнен именно выбранный экземпляр.
        -   PySM прерывает обычную последовательность и передает управление указанному скрипту.
        -   Скрипт завершается с кодом **`0` (Успех)**.
    -   **Пользователь нажимает "Cancel"**:
        -   Скрипт сообщает PySM, что выполнение нужно остановить.
        -   Скрипт завершается с кодом **`1` (Отмена)**, и вся цепочка прерывается.

## 4. Пример использования: Создание цикла

**Задача:** Обработать файлы, а затем спросить у пользователя, не хочет ли он обработать их еще раз с другими параметрами.

**Структура набора в PySM:**
1.  `[ID: script_A]` - **run_gui_dialog_vars.py**: Пользователь вводит параметры обработки.
2.  `[ID: script_B]` - **some_processing.py**: Скрипт, который выполняет обработку.
3.  `[ID: script_C]` - **run_logic_jump.py**: Наш скрипт условного перехода.
    -   *Title*: "Повторить обработку?"
    -   *Message*: "Выберите 'script_A' для повторного ввода параметров или любой другой скрипт для продолжения."

**Процесс выполнения:**
1.  Выполняется `script_A`, пользователь вводит параметры.
2.  Выполняется `script_B`, происходит обработка.
3.  Выполняется `script_C`. Появляется диалог со списком: `script_A`, `script_B`, `script_C`, ...
4.  Если пользователь выбирает `script_A` и нажимает "OK", PySM снова запустит `script_A`. **Цикл замкнулся.**
5.  Если пользователь нажмет "Cancel", выполнение всей цепочки остановится.