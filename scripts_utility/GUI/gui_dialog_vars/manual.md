# Руководство по использованию скрипта "Редактор Контекста"

## 1. Назначение

Скрипт **"Редактор Контекста"** — это мощный инструмент, предназначенный в первую очередь для **отладки** ваших рабочих процессов. Он позволяет в любой момент выполнения цепочки посмотреть текущее состояние всех переменных в Контексте Коллекции или даже полностью его изменить.

---
### **ПРЕДУПРЕЖДЕНИЕ!**

Используйте этот скрипт с осторожностью. Режим редактирования позволяет **полностью стереть и перезаписать** все пользовательские переменные. Случайное удаление или переименование переменной, которая используется в последующих скриптах, **приведет к ошибкам в их работе**.
---

## 2. Режимы работы

Скрипт может работать в одном из двух режимов, который определяется параметром `edit`.

### Режим просмотра (`edit` = `false`, по умолчанию)

-   **Описание:** В этом режиме окно показывает таблицу всех текущих переменных и их значений. Редактирование невозможно.
-   **Кнопки:** Доступна только кнопка "OK" для закрытия окна.
-   **Влияние на поток:** Закрытие окна не прерывает выполнение цепочки (код выхода `0`).

### Режим редактирования (`edit` = `true`)

-   **Описание:** В этом режиме вы можете добавлять, удалять и изменять любые переменные и их значения.
-   **Кнопки:**
    -   `Добавить переменную`: Добавляет новую пустую строку в конец таблицы.
    -   `Удалить`: Кнопка в каждой строке для ее удаления.
    -   `OK`: Сохраняет все изменения.
    -   `Cancel`: Закрывает окно без сохранения изменений.
-   **Влияние на поток:**
    -   Нажатие "OK" **полностью перезаписывает** контекст и продолжает выполнение цепочки (код выхода `0`).
    -   Нажатие "Cancel" или закрытие окна **прерывает выполнение всей цепочки** (код выхода `1`).

## 3. Параметры

-   **Режим редактирования** (`__edit`):
    -   **Тип:** Флаг (галочка).
    -   **Описание:** Если флаг установлен, скрипт запускается в режиме редактирования. В противном случае — в режиме просмотра.
    -   **По умолчанию:** выключен.

-   **Заголовок окна** (`__title`):
    -   **Тип:** Строка.
    -   **Описание:** Позволяет задать пользовательский заголовок для окна. Если не указан, заголовок будет "Просмотр контекста" или "Редактирование контекста" в зависимости от режима.

## 4. Пример использования

**Задача:** После работы скрипта, который извлекает метаданные из фото, проверить, что именно было извлечено, перед тем как передать эти данные в следующий скрипт.

1.  В цепочку добавляется скрипт, извлекающий метаданные (например, `get_metadata.py`).
2.  Сразу после него добавляется скрипт **"Редактор Контекста"** с параметром `edit`, оставленным по умолчанию (выключен).
3.  При запуске цепочки после извлечения метаданных появится окно, в котором вы увидите все переменные (`psd_meta_Keywords`, `psd_meta_Headline` и т.д.) и их значения. Вы можете убедиться, что все корректно, и закрыть окно, чтобы продолжить выполнение.