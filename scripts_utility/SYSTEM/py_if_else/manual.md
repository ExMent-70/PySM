# Руководство по скрипту "Условный переход (If-Then-Else)" (v1.1.0)

## 1. Назначение

Этот скрипт является мощным инструментом для управления потоком выполнения в наборах PyScriptManager. Он работает как логический шлюз: проверяет условие и, в зависимости от результата, направляет выполнение по одной из двух веток ("Then" или "Else").

## 2. Логика работы

1.  **Получает параметры:** Скрипт считывает свою конфигурацию, включая переменную для проверки, оператор, значение и ID целевых скриптов.
2.  **Извлекает значение:** Получает актуальное значение проверяемой переменной из общего контекста PySM.
3.  **Выполняет сравнение:** Сравнивает значение из контекста с эталонным значением, используя указанный оператор.
4.  **Устанавливает переход:**
    *   Если условие истинно, устанавливает скрипт из ветки `Then` как следующий для выполнения.
    *   Если условие ложно, устанавливает скрипт из ветки `Else`. Если ветка `Else` не задана, выполнение продолжается к следующему скрипту в наборе по умолчанию.
5.  **Очищает переменную (опционально):** Если установлен флаг `clear-variable`, удаляет проверенную переменную из контекста.

## 3. Параметры

-   `--if-variable-name`
    -   **Назначение:** Имя переменной в контексте, которую нужно проверить (например, `processing_status` или `psd_meta_doc.width`).
    -   **Тип:** Строка.

-   `--if-operator`
    -   **Назначение:** Логическая операция для сравнения.
    -   **Доступные значения:** `равно`, `не равно`, `больше`, `меньше`, `содержит`, `не содержит`.

-   `--if-comparison-value`
    -   **Назначение:** Эталонное значение, с которым будет проводиться сравнение.
    -   **Тип:** Строка.

-   `--then-instance-id`
    -   **Назначение:** ID экземпляра скрипта, который будет запущен, если условие **истинно**.
    -   **Тип:** Строка.

-   `--else-instance-id`
    -   **Назначение:** ID экземпляра скрипта для запуска, если условие **ложно**.
    -   **Поведение по умолчанию:** Если параметр не задан, выполнение продолжается к следующему скрипту в наборе.

-   `--clear-variable`
    -   **Назначение:** Если флаг установлен (`true`), переменная, указанная в `--if-variable-name`, будет удалена из контекста после проверки.
    -   **Тип:** Булево (флаг).

## 4. Примеры использования

### Пример 1: Проверка статуса обработки

-   **Переменная:** `processing_status`
-   **Оператор:** `равно`
-   **Значение:** `success`
-   **Then ID:** `instance_id_archive`
-   **Else ID:** `instance_id_report_error`

**Результат:** Если `processing_status` равно "success", запустится архивация. В противном случае — отправка отчета.

### Пример 2: Разветвление без "Else"

-   **Переменная:** `psd_meta_doc.width`
-   **Оператор:** `больше`
-   **Значение:** `4000`
-   **Then ID:** `instance_id_process_large`
-   **Else ID:** (пусто)

**Результат:** Если ширина документа больше 4000, запустится обработчик для больших файлов. Если нет, выполнение просто перейдет к следующему скрипту в списке.